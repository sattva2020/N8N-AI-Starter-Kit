# ADVANCED N8N WORKFLOWS v1.2.0 - –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

## üéØ –û–ë–ó–û–† –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–• WORKFLOWS

–í —Ä–∞–º–∫–∞—Ö **–≠—Ç–∞–ø–∞ 2: Advanced N8N Workflows** –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ **6 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö production workflows**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏—Ö –ø–æ–ª–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é AI-—Å–∏—Å—Ç–µ–º—ã.

---

## üìã –°–ü–ò–°–û–ö PRODUCTION WORKFLOWS

### 1. **Document Processing Pipeline v1.2.0**
**–§–∞–π–ª:** `document-processing-pipeline-v1.2.0.json`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ webhook API

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ webhook `/document-upload`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Document Processor
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Å–ª–æ–≤–∞, —á–∞–Ω–∫–∏)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Qdrant Vector DB
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–æ–º

**Endpoints:**
- `POST /webhook/document-upload` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "file_path": "/path/to/document.pdf",
  "document_type": "auto",
  "user_id": "user123"
}
```

---

### 2. **RAG Query Automation v1.2.0**
**–§–∞–π–ª:** `rag-query-automation-v1.2.0.json`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ webhook `/rag-query`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞ (question/search/general)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ health checks (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)

**Endpoints:**
- `POST /webhook/rag-query` - –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "query": "–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã?",
  "max_results": 5,
  "include_metadata": true,
  "user_id": "user123"
}
```

---

### 3. **Batch Document Processing v1.2.0**
**–§–∞–π–ª:** `batch-processing-v1.2.0.json`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–∏–µ–º –º–∞—Å—Å–∏–≤–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ webhook `/batch-process`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∞—Ç—á–∞ (–º–∞–∫—Å. 50 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (—É—Å–ø–µ—à–Ω—ã–µ/–Ω–µ—É–¥–∞—á–Ω—ã–µ)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- ‚úÖ –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±–∞—Ç—á–µ–π (–∫–∞–∂–¥—ã–π —á–∞—Å)

**Endpoints:**
- `POST /webhook/batch-process` - –º–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "files": [
    "/path/to/doc1.pdf",
    "/path/to/doc2.docx",
    "/path/to/doc3.txt"
  ],
  "user_id": "user123",
  "priority": "normal",
  "notify_on_complete": true
}
```

---

### 4. **Error Handling & Notifications v1.2.0**
**–§–∞–π–ª:** `error-handling-notifications-v1.2.0.json`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–∏–µ–º –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ webhook `/error-handler`
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ (network/auth/resource/validation/data)
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ (critical/high/medium)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
  - üö® Critical ‚Üí Email + Slack + Webhook
  - ‚ö†Ô∏è High ‚Üí Email + Slack
  - üìù Medium ‚Üí –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –æ—à–∏–±–æ–∫ (09:00)

**Endpoints:**
- `POST /webhook/error-handler` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–∫–∏

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "error": "Connection timeout to Qdrant service",
  "source": "document-processor",
  "severity": "high",
  "user_id": "user123",
  "context": {"timeout": 30, "retry_count": 3}
}
```

---

### 5. **System Monitoring & Health Check v1.2.0**
**–§–∞–π–ª:** `system-monitoring-v1.2.0.json`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–∏—Å—Ç–µ–º—ã

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ health checks (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç):
  - üåê Web Interface (port 8001)
  - üìÑ Document Processor (port 8000)  
  - üóÑÔ∏è Qdrant Vector DB (port 6333)
  - üîÑ N8N API (port 5678)
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç):
  - üíæ –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
  - üß† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
  - ‚ö° CPU –Ω–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–°—Ç–∞—Ç—É—Å—ã —Å–∏—Å—Ç–µ–º—ã:**
- üü¢ `healthy` - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- üü° `degraded` - —á–∞—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- üî¥ `critical` - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

---

### 6. **Email Integration & Notifications v1.2.0**
**–§–∞–π–ª:** `email-integration-v1.2.0.json`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å —à–∞–±–ª–æ–Ω–∞–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —á–µ—Ä–µ–∑ webhook `/send-email`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è email –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ 4 –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–∞:
  - üìÑ `document_processed` - –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω
  - üì¶ `batch_complete` - –±–∞—Ç—á –∑–∞–≤–µ—Ä—à–µ–Ω
  - üö® `system_alert` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
  - ‚ùå `error_report` - –æ—Ç—á–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ HTML –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∏—Å–µ–º
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–∏—Å–µ–º
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (18:00)

**Endpoints:**
- `POST /webhook/send-email` - –æ—Ç–ø—Ä–∞–≤–∫–∞ email

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "to": "user@example.com",
  "template": "document_processed",
  "template_data": {
    "document_name": "report.pdf",
    "pages": 15,
    "word_count": 3500,
    "chunks_created": 12,
    "processing_time": 45
  },
  "user_id": "user123"
}
```

---

## üîó –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø WORKFLOWS

### Workflow Communication Chain:
```
Document Upload ‚Üí Processing Pipeline ‚Üí Email Notification
                ‚Üì
Error Occurs ‚Üí Error Handler ‚Üí Email Alert ‚Üí System Monitor
                ‚Üì
Batch Processing ‚Üí Progress Tracking ‚Üí Completion Email
                ‚Üì
RAG Query ‚Üí Search Results ‚Üí Usage Logging
```

### Webhook Endpoints Summary:
- `/webhook/document-upload` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `/webhook/rag-query` - –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º  
- `/webhook/batch-process` - –º–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `/webhook/error-handler` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- `/webhook/send-email` - –æ—Ç–ø—Ä–∞–≤–∫–∞ email

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ú–ï–¢–†–ò–ö–ò

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:
- ‚è∞ **Health Checks** - –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- ‚è∞ **Deep Monitoring** - –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç  
- ‚è∞ **Batch Cleanup** - –∫–∞–∂–¥—ã–π —á–∞—Å
- ‚è∞ **Error Summary** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00
- ‚è∞ **Email Report** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 18:00

### Collected Metrics:
- üìà System health percentage
- üìà Service response times
- üìà Document processing statistics
- üìà Error rates by type and severity
- üìà Email delivery statistics
- üìà RAG query performance

---

## üöÄ DEPLOYMENT –ò–ù–°–¢–†–£–ö–¶–ò–ò

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç:
```bash
# Workflows –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
docker-compose up -d
```

### 2. –†—É—á–Ω–æ–π –∏–º–ø–æ—Ä—Ç:
```bash
# –ó–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞ –≤—Ä—É—á–Ω—É—é
docker-compose exec n8n-importer python /app/import-workflows.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ workflows:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ workflows –≤ N8N
curl http://localhost:5678/api/v1/workflows
```

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### Environment Variables:
```env
# Email Configuration (–≤ .env —Ñ–∞–π–ª–µ)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Notification Settings
ALERT_EMAIL=admin@example.com
SLACK_WEBHOOK_URL=https://hooks.slack.com/...

# Monitoring Settings
HEALTH_CHECK_INTERVAL=300  # 5 minutes
DEEP_MONITORING_INTERVAL=900  # 15 minutes
```

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Advanced N8N Workflows, —Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É:

### üìä **–≠—Ç–∞–ø 3: Enhanced Monitoring & Analytics**
- Prometheus integration
- Grafana dashboards  
- Centralized logging
- Analytics dashboard

### üîß **–≠—Ç–∞–ø 4: DevOps & CI/CD**
- GitHub Actions
- Automated testing
- Deploy automation
- Version management

---

## ‚úÖ –°–¢–ê–¢–£–° –ó–ê–í–ï–†–®–ï–ù–ò–Ø

**üéâ –≠–¢–ê–ü 2 –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù!**

- ‚úÖ 6 Advanced Production Workflows —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –í—Å–µ workflows –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≤–∞–ª–∏–¥–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É workflows —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É —Ä–∞–∑–≤–∏—Ç–∏—è!** üöÄ
