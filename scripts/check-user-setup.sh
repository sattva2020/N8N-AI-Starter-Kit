#!/bin/bash

# –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ Ubuntu VM

echo "================================================="
echo "üöÄ N8N AI Starter Kit - –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Ubuntu VM"
echo "================================================="
echo
echo "–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: $(whoami)"
echo

if [[ $EUID -eq 0 ]]; then
    echo "‚úÖ –í—ã –∑–∞–ø—É—â–µ–Ω—ã –æ—Ç root - –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
    echo
    echo "–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
    echo "   bash scripts/create-user.sh"
    echo
    echo "–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –Ω–µ–≥–æ:"
    echo "   su - n8nuser"
    echo
    echo "–ò –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:"
    echo "   ./scripts/ubuntu-vm-deploy.sh"
else
    echo "‚ÑπÔ∏è  –í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –ø–æ–¥ –æ–±—ã—á–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º: $(whoami)"
    echo
    echo "–ü—Ä–æ–≤–µ—Ä–∏–º –≤–∞—à–∏ –ø—Ä–∞–≤–∞:"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ sudo –ø—Ä–∞–≤
    if sudo -n true 2>/dev/null; then
        echo "‚úÖ –£ –≤–∞—Å –µ—Å—Ç—å sudo –ø—Ä–∞–≤–∞"
    else
        echo "‚ùå –£ –≤–∞—Å –Ω–µ—Ç sudo –ø—Ä–∞–≤"
        echo "   –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—Å –≤ –≥—Ä—É–ø–ø—É sudo:"
        echo "   sudo usermod -aG sudo $(whoami)"
        exit 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø—ã docker
    if groups | grep -q docker; then
        echo "‚úÖ –í—ã –≤ –≥—Ä—É–ø–ø–µ docker"
    else
        echo "‚ö†Ô∏è  –í—ã –Ω–µ –≤ –≥—Ä—É–ø–ø–µ docker"
        echo "   –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker –¥–æ–±–∞–≤—å—Ç–µ —Å–µ–±—è –≤ –≥—Ä—É–ø–ø—É:"
        echo "   sudo usermod -aG docker $(whoami)"
        echo "   newgrp docker"
    fi
    
    echo
    echo "–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:"
    echo "   ./scripts/ubuntu-vm-deploy.sh"
fi

echo
echo "================================================="
echo "üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:"
echo "   docs/UBUNTU_VM_COMPLETE_GUIDE.md"
echo "   docs/UBUNTU_USER_SETUP.md"
echo "================================================="
